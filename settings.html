<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Settings - Monthly Goal</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
body {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  background-color: #dedede;
  font-family: 'Share Tech Mono', monospace;
}
#hamburger {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 30px;
  cursor: pointer;
  user-select: none;
}
#nav-menu {
  position: absolute;
  top: 50px;
  right: 10px;
  background-color: rgba(255, 255, 255, 0.9);
  border: 1px solid #ccc;
  padding: 10px;
  display: none;
  font-size: 1.2em;
}
#nav-menu.open {
  display: block;
}
#nav-menu a {
  display: block;
  text-decoration: none;
  color: #333;
  margin: 5px 0;
}
#slider-container {
  margin-top: 20px;
}
#goal-label[contenteditable] {
  display: inline-block;
  min-width: 6ch;
  padding: 2px 4px;
  border: 1px dashed transparent;
}
#goal-label[contenteditable]:focus {
  outline: none;
  border-color: #666;
  background-color: #fff;
}
</style>
</head>
<body>
<div id="hamburger">&#9776;</div>
<div id="nav-menu">
  <a href="index.html">Home</a>
  <a href="#">Stats</a>
  <a href="settings.html">Settings</a>
</div>
<h1>Settings</h1>
<div id="slider-container">
  <label for="goal-slider">Monthly goal:</label>
  <input type="range" id="goal-slider" min="100000" max="1000000" step="1000">
  <span id="goal-label" contenteditable="true"></span>
</div>
<script>
const slider = document.getElementById('goal-slider');
const goalLabel = document.getElementById('goal-label');
const hamburger = document.getElementById('hamburger');
const navMenu = document.getElementById('nav-menu');

let monthlyGoal = Number(localStorage.getItem('monthlyGoal')) || 500000;

function updateGoalDisplay() {
  goalLabel.textContent = monthlyGoal.toLocaleString();
}

hamburger.addEventListener('click', () => {
  navMenu.classList.toggle('open');
});

slider.value = monthlyGoal;
updateGoalDisplay();

slider.addEventListener('input', () => {
  monthlyGoal = Number(slider.value);
  updateGoalDisplay();
  localStorage.setItem('monthlyGoal', monthlyGoal);
});

goalLabel.addEventListener('blur', () => {
  const digits = goalLabel.textContent.replace(/[^0-9]/g, '');
  const value = Number(digits);
  if (!isNaN(value) && value >= 100000 && value <= 1000000) {
    monthlyGoal = value;
    slider.value = value;
  }
  updateGoalDisplay();
  localStorage.setItem('monthlyGoal', monthlyGoal);
});
</script>
</body>
</html>
